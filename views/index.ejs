<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teams Clone</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <!--BOOTSTRAP-->
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!--LINKING PEER JS AND SOCKET IO-->
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://kit.fontawesome.com/c939d0e917.js"></script>
    <!--BOOTSTRAP-->
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!--JQUERY-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!--GETTING ROOM ID-->
    <script>
        const stripHTML = (str) => str.replace(/(<([^>]+)>)/gi, "");
        const RoomId = "<%= roomId %>";
        const username = stripHTML(prompt("Join as: "));
    </script>

    <script>
        // When the user clicks on <div>, open the popup
        function popup() {
            var popup = document.getElementById("myPopup");
            popup.classList.toggle("show");
        }
    </script>
</head>

<body style="background-color: #161d28;">
    <div class="header">
        <div class="back">
            <form action="/" method="GET">
                <button class="btn btn-outline"><i class="fa fa-home" aria-hidden="true"></i></button>
            </form>
        </div>
    </div>
    <!--DISPLAYING THE VIDEO GRID-->
    <div class="main">
        <div class="left" id="l">
            <!--DISPLAY VIDEOS-->
            <div class="videos">
                <div id="video-grid">
                </div>
            </div>
            <!--CONTROLS-->
            <div class="controls">
                <!--GET CODE TO INVITE PEOPLE-->
                <div class="control_block">
                    <div class="control_buttons" onclick="popup()">
                        <div class="popup"><i class="fa fa-info-circle" aria-hidden="true"></i>
                            <span class="popuptext" id="myPopup">Meeting Code : <div>
                                    <%- roomId %>
                                </div>
                        </div>
                    </div>
                    <div class="vl"></div>
                    <!--On clicking this icon call stopPlay()-->
                    <div onclick="stopPlay()" class="control_buttons video_btn">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="vl"></div>
                    <!--On clicking this icon call muteUmnute()-->
                    <div onclick="muteUnmute()" class="control_buttons mute_btn">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <div class="vl"></div>
                    <!--Leave Meeting-->
                    <div class="control_buttons">
                        <form action="/" method="GET">
                            <button class="btn btn-outline"><i class="fa fa-phone" aria-hidden="true"
                                    style="color:#d2d2d2;"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--CHAT SECTION-->
        <div class="right">
            <div class="chat">
            </div>
            <div class="chat_window">
                <ul class="messages">

                </ul>
            </div>
            <div class="message_container">
                <input id="chat_msg" type="text" placeholder="Type message here"
                    style="margin: 5px; margin-bottom: 10px; width: -webkit-fill-available; margin-right: 15px; font-family: 'Times New Roman', Times, serif;">
            </div>
        </div>
    </div>
    <script src="/scripts/script.js"></script>
</body>

</html>